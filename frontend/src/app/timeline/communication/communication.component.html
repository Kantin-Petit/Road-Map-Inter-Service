<div *ngFor="let serviceName of servicesName">
  <label>
    <input type="checkbox" [value]="serviceName" [(ngModel)]="checkedServices[serviceName]" (ngModelChange)="onCheckboxChange()"/>
    {{ serviceName }}
  </label>
</div>

<h2>Tout les sujets</h2>

<div *ngFor="let subject of subjects | keyvalue">
  <label>
    <input type="checkbox" [value]="subject.key" />
    {{ subject.key }}
  </label>
</div>

<div class="timeline_wrapper">

  
  <ng-container *ngFor="let service of servicesFiltered | keyvalue">
  <section  *ngIf="checkedServices[selectedForService(service)] || showAllServices" class="timeline">
    <div class="info">
      <img width="50" height="50" src="https://assets.codepen.io/210284/face.svg" alt=""/>
      <h2>{{service.key | uppercase }}</h2>
      <p>{{ service.value.description }}</p>
        <select *ngIf="service.value.sujets" [ngModel]="selectedSubjects[selectedForService(service)]" (ngModelChange)="onSelectSubjects(service.key, $event)">
          <option value="all">Tout</option>
          <option *ngFor="let sujet of service.value.sujets" [value]="sujet">{{ sujet }}</option>
        </select>
    </div>
    <ol>
      <li *ngFor="let timeline of service.value.timelines; let i = index" 
        [class.card_selected]="sidebarVisible && selectedItemIndex === i">
        <div (click)="toggleSidebar(i, timeline.titre, timeline.texte)">
          <time>{{ timeline.titre }}</time>
          <ng-container *ngIf="timeline.texte && isSingleText(timeline.texte)">
            <p *ngFor="let texte of timeline.texte">- {{ texte }}</p>
          </ng-container>
          <p *ngIf="timeline.texte && !isSingleText(timeline.texte)">{{ timeline.texte }}</p>
        </div>
      </li>
    </ol>
    <p-sidebar [(visible)]="sidebarVisible" position="right">
      <h3>{{sidebarData.title}}</h3>
      <ng-container *ngIf="sidebarData.text && isSingleText(sidebarData.text)">
        <p *ngFor="let texte of sidebarData.text">- {{ texte }}</p>
      </ng-container>
      <p *ngIf="sidebarData.text && !isSingleText(sidebarData.text)">{{ sidebarData.text }}</p>
    </p-sidebar>
  </section>
  </ng-container>
</div>
